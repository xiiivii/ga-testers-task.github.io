"use strict";function Preloader(){var t="\n        animationiteration\n        webkitanimationiteration\n        mozanimationiteration\n        msanimationiteration\n    ",s=50,i=75,n=$("html").hasClass("css-clip-path-circle")?"\n        .intro-products,\n        .intro-product__svg,\n        .intro-product__img,\n        .intro-product__img-2x,\n        .offer__image,\n        .banner-brands__img\n    ":"\n        .intro-products,\n        .intro-product__svg,\n        .intro__gif,\n        .offer__image,\n        .banner-brands__img\n    ";return{cls:{facesStage:"preloader_faces",finishStage:"preloader_finish",faces:"preloader__faces",dot:"preloader__dot",background:"preloader__background",progress:"preloader__progress"},init:function(s,t){return 0===s.length?null:(this.$body=$("body"),this.$dom=s,this.props=t,this._cacheElems()._bindEvents()._setInitialState()._onFakeLoadingProgress())},_setInitialState:function(){return this._realProgress=0,this._fakeProgress=0,this._fakeTimeout=null,this._imagesLoaded=0,this._imagesTotal=this.$images.length,this},_cacheElems:function(){return this.$faces=this.$dom.find(".".concat(this.cls.faces)),this.$dot=this.$dom.find(".".concat(this.cls.dot)),this.$background=this.$dom.find(".".concat(this.cls.background)),this.$progress=this.$dom.find(".".concat(this.cls.progress)),this.$images=$(n),this},_bindEvents:function(){var s=this;return setTimeout(function(){s.$images.imagesLoaded({background:!0}).progress(function(){return s._onRealLoadingProgress()})},500),this.$dot.on(t,function(){return s._checkIfFaces()}),this.$background.on(t,function(){return s._checkIfFinish()}),this},_onRealLoadingProgress:function(){this._imagesLoaded+=1,this._realProgress=Math.round(this._imagesLoaded/this._imagesTotal*s),this._updateProgress()},_onFakeLoadingProgress:function(){var s=this;return this._fakeProgress===i?this:(this._fakeProgress+=1,this._fakeTimeout=setTimeout(function(){return s._onFakeLoadingProgress()},100),this._updateProgress())},_updateProgress:function(){return this._progress=Math.min(this._fakeProgress+this._realProgress,100),this.$progress.text(this._progress),this},_checkIfFaces:function(){return 25<this._progress&&this._initFaces(),this},_initFaces:function(){return this.$dom.addClass(this.cls.facesStage),this.$dot.off(t),this},_checkIfFinish:function(){return this._progress<95?this:(this._realProgress=100,this._updateProgress()._onBeforeFinish())},_onBeforeFinish:function(){var s=this;clearTimeout(this._fakeTimeout),this.$dom.addClass(this.cls.finishStage),this.$background.off(t),this.props.onBeforeFinish({light:this._getLightParams()}),setTimeout(function(){return s._onFinish()},1500)},_onFinish:function(){this.$dom.remove(),this.props.onFinish()},_getLightParams:function(){var s=768<=window.innerWidth?0:1,t=this.$faces[s].getBoundingClientRect(),i=t.width/2;return{s:i,x:t.x+i,y:t.y+i}}}}
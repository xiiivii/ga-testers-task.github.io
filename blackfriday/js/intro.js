"use strict";function Intro(){return{cls:{introProducts:"intro-products",introLight:"intro__back",sceneFront:"intro__front",sceneBack:"intro__back",sceneCopied:"intro_scene-copied",dot:"intro__i-dot",word:"intro__word",tabReachable:"intro__tab-reachable"},init:function(t,i){return this.$win=$(window),this.$dom=t,this.props=i,this._initState()._cacheElems()._copyScene()._bindEvents()._setLightSize()},_initState:function(){return this._scrollTop=0,this._lightSize=0,this._lightIsControllable=!1,this._isTouch=!1,this._idleAnimationCountdownTimeout=null,this._idleAnimationTimeout=null,this._idleAnimationDelay=null,this},_cacheElems:function(){var t=this;return this.$$Products=App.cacheBlock(this,IntroProducts,{}),this.$$Light=App.cacheBlock(this,IntroLight,{onPulsateEnd:function(){return t._onLightPulsateEnd()}}),this.$inner=this.$dom.find(".".concat(this.cls.inner)),this.$sceneBack=this.$dom.find(".".concat(this.cls.sceneBack)),this.$sceneFront=this.$dom.find(".".concat(this.cls.sceneFront)),this.$dot=this.$dom.find(".".concat(this.cls.dot)),this.$words=this.$dom.find(".".concat(this.cls.word)).toArray(),this},_onLightPulsateEnd:function(){var t=this;this.$$Light.go({s:this._lightSize}),setTimeout(function(){t.activateLightControl()._initLight()},1e3)},_copyScene:function(){var t=this.$sceneFront.html();return this.$sceneBack.html(t).find(".".concat(this.cls.tabReachable)).prop("tabindex",0),this.$dom.addClass(this.cls.sceneCopied),this.props.onSceneCopy(),this},_bindEvents:function(){var i=this;return this.$win.on("touchstart",function(t){return i._onTouchStart(t)}).on("mousemove",function(t){return i._onMouseMove(t)}).on("touchend",function(t){return i._onTouchEnd(t)}),this.$win.on("scroll",function(){return i._onScroll()}).on("resize",function(){return i._onResize()}),this},_onTouchStart:function(t){this._isTouch=!0,this._interactionGo(t)},_onMouseMove:function(t){this._lightIsControllable&&this._interactionGo(t)},_onTouchEnd:function(){var t=this;setTimeout(function(){t._isTouch=!1},250)},_interactionGo:function(t){return this.$$Light.go({x:t.pageX,y:t.pageY,s:this._lightSize}),this._resetIdleAnimation()},_onScroll:function(){this._scrollTop=this.$win.scrollTop()},_onResize:function(){this._setLightSize()._setIdleAnimationBoundaries()},_unsetIdleAnimationTimeout:function(){return this._idleAnimationCountdownTimeout=clearTimeout(this._idleAnimationCountdownTimeout),this._idleAnimationTimeout=clearTimeout(this._idleAnimationTimeout),this},_resetIdleAnimation:function(){return this._idleAnimationDelay=this._isTouch?3e3:3e4,this._unsetIdleAnimationTimeout()._setIdleAnimationTimeout()},_setIdleAnimationTimeout:function(){var t=this;return this._idleAnimationCountdownTimeout=setTimeout(function(){return t._startIdleAnimation()},this._idleAnimationDelay),this},_startIdleAnimation:function(){var t=this,i=this._idleBoundaries,n=App.random(i.xMin,i.xMax),o=App.random(i.yMin,i.yMax),e=App.random(1e3,2e3);return this.$$Light.go({x:n,y:o,s:this._lightSize}),this._idleAnimationTimeout=setTimeout(function(){return t._startIdleAnimation()},e),this},_setIdleAnimationBoundaries:function(){var s=1/0,h=0,r=1/0,u=0;return this.$words.forEach(function(t){var i=$(t),n=i.offset(),o=i.width(),e=i.height();s=Math.min(n.left,s),h=Math.max(n.left+o,s),r=Math.min(n.top,r),u=Math.max(n.top+e,u)}),this._idleBoundaries={xMin:s,xMax:h,yMin:r,yMax:u},this},_setLightSize:function(){return window.innerWidth<768?this._lightSize=70:window.innerWidth<1360?this._lightSize=150:this._lightSize=190,this},initWithPreloader:function(t){var i=this,n=t.x,o=t.y,e=t.s;return this.$$Light.set({x:n,y:o,s:e}),setTimeout(function(){return i.$$Light.go({s:i._lightSize})},500),setTimeout(function(){return i._initLight()},1e3),this},_initLight:function(){return this._setIdleAnimationBoundaries()._startIdleAnimation()},initWithoutPreloader:function(){var t=this;return setTimeout(function(){return t._initLightWithoutPreloader()},500),this},_initLightWithoutPreloader:function(){var t=this._getDotParams(),i=t.x,n=t.y,o=t.s;return this.$$Light.set({x:i,y:n}).pulsate(o),this},_getDotParams:function(){var t=this.$dot.get(0).getBoundingClientRect(),i=t.width/2,n=t.height/2;return{x:t.left+i,y:t.top+n,s:t.height/2}},activateLightControl:function(){return this._lightIsControllable=!0,this}}}